@model SampleDataset
@{
    ViewData["Title"] = "Sample Data";
}

<h1 class="display-4 text-center mb-4">
    <i class="fas fa-database me-3"></i>Sample Dataset
</h1>

<div class="alert alert-info mb-4">
    <i class="fas fa-info-circle me-2"></i>
    This sample dataset demonstrates the relationships between employees, companies, and employment records. The data includes employees from various companies to show how the query filters results.
</div>

<div class="row mb-4">
    <div class="col-md-4">
        <div class="card shadow">
            <div class="card-body text-center">
                <h3 class="text-primary">@Model.TotalEmployees</h3>
                <p class="mb-0">Total Employees</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow">
            <div class="card-body text-center">
                <h3 class="text-success">@Model.TotalCompanies</h3>
                <p class="mb-0">Total Companies</p>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card shadow">
            <div class="card-body text-center">
                <h3 class="text-warning">@Model.ActiveEmployments</h3>
                <p class="mb-0">Active Employments</p>
            </div>
        </div>
    </div>
</div>

<!-- Companies Table -->
<div class="card shadow mb-4">
    <div class="card-header bg-success text-white">
        <h5 class="mb-0"><i class="fas fa-building me-2"></i>Companies</h5>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Company ID</th>
                        <th>Company Name</th>
                        <th>Industry</th>
                        <th>Headquarters</th>
                        <th>Founded</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var company in Model.Companies)
                    {
                        <tr @(company.CompanyName == "First Bank Corporation" ? "class=table-success" : "")>
                            <td>@company.CompanyId</td>
                            <td><strong>@company.CompanyName</strong></td>
                            <td>@company.Industry</td>
                            <td>@company.HeadquartersCity</td>
                            <td>@company.FoundedYear</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Employees Table -->
<div class="card shadow mb-4">
    <div class="card-header bg-primary text-white">
        <h5 class="mb-0"><i class="fas fa-users me-2"></i>Employees</h5>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Address</th>
                        <th>City</th>
                        <th>State</th>
                        <th>Zip</th>
                        <th>Hire Date</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var emp in Model.Employees)
                    {
                        <tr>
                            <td>@emp.EmployeeId</td>
                            <td><strong>@emp.FirstName @emp.LastName</strong></td>
                            <td>@emp.StreetAddress</td>
                            <td>@emp.City</td>
                            <td>@emp.State</td>
                            <td>@emp.ZipCode</td>
                            <td>@emp.HireDate.ToShortDateString()</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Employment Records Table -->
<div class="card shadow mb-4">
    <div class="card-header bg-warning text-dark">
        <h5 class="mb-0"><i class="fas fa-briefcase me-2"></i>Employment Records</h5>
    </div>
    <div class="card-body p-0">
        <div class="table-responsive">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Employment ID</th>
                        <th>Employee</th>
                        <th>Company</th>
                        <th>Position</th>
                        <th>Salary</th>
                        <th>Start Date</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var employment in Model.Employments)
                    {
                        var employee = Model.Employees.First(e => e.EmployeeId == employment.EmployeeId);
                        var company = Model.Companies.First(c => c.CompanyId == employment.CompanyId);
                        var isTarget = company.CompanyName == "First Bank Corporation" && employment.Salary > 100000 && employment.IsActive;
                        
                        <tr @(isTarget ? "class=table-warning" : "")>
                            <td>@employment.EmploymentId</td>
                            <td>@employee.FirstName @employee.LastName</td>
                            <td>@company.CompanyName</td>
                            <td>@employment.Position</td>
                            <td>$@employment.Salary.ToString("N0")</td>
                            <td>@employment.StartDate.ToShortDateString()</td>
                            <td>
                                @if (employment.IsActive)
                                {
                                    <span class="badge bg-success">Active</span>
                                }
                                else
                                {
                                    <span class="badge bg-secondary">Inactive</span>
                                }
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<div class="alert alert-warning">
    <h5 class="alert-heading"><i class="fas fa-highlighter me-2"></i>Highlighted Records</h5>
    <p>The highlighted rows (in yellow) show the employment records that match our query criteria:</p>
    <ul class="mb-0">
        <li>Company: First Bank Corporation</li>
        <li>Salary: Greater than $100,000</li>
        <li>Status: Active employment</li>
    </ul>
</div>

<div class="row mt-4">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-info text-white">
                <h6 class="mb-0"><i class="fas fa-chart-pie me-2"></i>Salary Distribution</h6>
            </div>
            <div class="card-body">
                <ul class="list-unstyled mb-0">
                    <li>< $50,000: 3 employees</li>
                    <li>$50,000 - $100,000: 5 employees</li>
                    <li>$100,000 - $150,000: 4 employees</li>
                    <li>> $150,000: 3 employees</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-secondary text-white">
                <h6 class="mb-0"><i class="fas fa-filter me-2"></i>Query Match Statistics</h6>
            </div>
            <div class="card-body">
                <p><strong>First Bank Corporation Employees:</strong> 4</p>
                <p><strong>Earning > $100,000:</strong> 3</p>
                <p><strong>Currently Active:</strong> 3</p>
                <p class="mb-0 text-success"><strong>Final Result Count:</strong> 3</p>
            </div>
        </div>
    </div>
</div>