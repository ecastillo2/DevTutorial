@{
    ViewData["Title"] = "Hub-Spoke Architecture";
}

<h1 class="display-4 text-center mb-4">
    <i class="fas fa-sitemap me-3"></i>Hub-Spoke Network Topology
</h1>

<div class="alert alert-info mb-4">
    <i class="fas fa-info-circle me-2"></i>
    <strong>Hub-Spoke Design Pattern:</strong> Centralized services in hub VNet with isolated workloads in spoke VNets. 
    This provides security isolation, simplified management, and cost optimization.
</div>

<div class="architecture-diagram mb-5">
    <svg viewBox="0 0 1400 900" class="w-100 border rounded shadow-lg">
        <!-- Background gradient -->
        <defs>
            <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f0f9ff;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#e0f2fe;stop-opacity:1" />
            </linearGradient>
            <filter id="shadow">
                <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
            </filter>
        </defs>
        <rect width="1400" height="900" fill="url(#bgGradient)"/>
        
        <!-- Title -->
        <text x="700" y="40" text-anchor="middle" font-size="24" font-weight="bold" fill="#1e40af">
            Azure Hub-Spoke Network Architecture
        </text>
        
        <!-- Hub VNet -->
        <g id="hub-vnet">
            <rect x="450" y="100" width="500" height="400" fill="#dbeafe" stroke="#3730a3" stroke-width="3" rx="20" filter="url(#shadow)"/>
            <text x="700" y="140" text-anchor="middle" font-size="20" font-weight="bold" fill="#1e293b">HUB VNET</text>
            <text x="700" y="165" text-anchor="middle" font-size="16" fill="#475569">10.100.0.0/16</text>
            
            <!-- Gateway Subnet -->
            <rect x="480" y="200" width="200" height="60" fill="#bfdbfe" stroke="#2563eb" stroke-width="2" rx="10"/>
            <text x="580" y="225" text-anchor="middle" font-weight="bold" font-size="14">Gateway Subnet</text>
            <text x="580" y="245" text-anchor="middle" font-size="12">10.100.1.0/24</text>
            
            <!-- Firewall Subnet -->
            <rect x="720" y="200" width="200" height="60" fill="#bfdbfe" stroke="#2563eb" stroke-width="2" rx="10"/>
            <text x="820" y="225" text-anchor="middle" font-weight="bold" font-size="14">Azure Firewall</text>
            <text x="820" y="245" text-anchor="middle" font-size="12">10.100.3.0/24</text>
            
            <!-- Management Subnet -->
            <rect x="480" y="280" width="200" height="60" fill="#bfdbfe" stroke="#2563eb" stroke-width="2" rx="10"/>
            <text x="580" y="305" text-anchor="middle" font-weight="bold" font-size="14">Management</text>
            <text x="580" y="325" text-anchor="middle" font-size="12">10.100.5.0/24</text>
            
            <!-- Shared Services -->
            <rect x="720" y="280" width="200" height="60" fill="#bfdbfe" stroke="#2563eb" stroke-width="2" rx="10"/>
            <text x="820" y="305" text-anchor="middle" font-weight="bold" font-size="14">Shared Services</text>
            <text x="820" y="325" text-anchor="middle" font-size="12">10.100.10.0/24</text>
            
            <!-- Services Details -->
            <text x="700" y="380" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e293b">Core Services:</text>
            <text x="700" y="405" text-anchor="middle" font-size="12" fill="#475569">• Active Directory • DNS • NTP</text>
            <text x="700" y="425" text-anchor="middle" font-size="12" fill="#475569">• Azure Monitor • Key Vault • Bastion</text>
        </g>
        
        <!-- Spoke VNets -->
        <!-- Production Spoke -->
        <g id="spoke-production">
            <rect x="50" y="150" width="300" height="300" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="15" filter="url(#shadow)"/>
            <text x="200" y="185" text-anchor="middle" font-size="18" font-weight="bold" fill="#14532d">PRODUCTION SPOKE</text>
            <text x="200" y="210" text-anchor="middle" font-size="14" fill="#15803d">10.101.0.0/16</text>
            
            <rect x="75" y="240" width="250" height="40" fill="#bbf7d0" stroke="#22c55e" stroke-width="1" rx="5"/>
            <text x="200" y="265" text-anchor="middle" font-size="12">Web Tier - 10.101.1.0/24</text>
            
            <rect x="75" y="295" width="250" height="40" fill="#bbf7d0" stroke="#22c55e" stroke-width="1" rx="5"/>
            <text x="200" y="320" text-anchor="middle" font-size="12">Application Tier - 10.101.2.0/24</text>
            
            <rect x="75" y="350" width="250" height="40" fill="#bbf7d0" stroke="#22c55e" stroke-width="1" rx="5"/>
            <text x="200" y="375" text-anchor="middle" font-size="12">Data Tier - 10.101.3.0/24</text>
            
            <text x="200" y="415" text-anchor="middle" font-size="11" fill="#15803d">Load Balancers | App Services | SQL DB</text>
        </g>
        
        <!-- Dev/Test Spoke -->
        <g id="spoke-devtest">
            <rect x="1050" y="150" width="300" height="300" fill="#fef3c7" stroke="#f59e0b" stroke-width="2" rx="15" filter="url(#shadow)"/>
            <text x="1200" y="185" text-anchor="middle" font-size="18" font-weight="bold" fill="#78350f">DEV/TEST SPOKE</text>
            <text x="1200" y="210" text-anchor="middle" font-size="14" fill="#92400e">10.102.0.0/16</text>
            
            <rect x="1075" y="240" width="250" height="40" fill="#fde68a" stroke="#fbbf24" stroke-width="1" rx="5"/>
            <text x="1200" y="265" text-anchor="middle" font-size="12">Dev Environment - 10.102.1.0/24</text>
            
            <rect x="1075" y="295" width="250" height="40" fill="#fde68a" stroke="#fbbf24" stroke-width="1" rx="5"/>
            <text x="1200" y="320" text-anchor="middle" font-size="12">Test Environment - 10.102.2.0/24</text>
            
            <rect x="1075" y="350" width="250" height="40" fill="#fde68a" stroke="#fbbf24" stroke-width="1" rx="5"/>
            <text x="1200" y="375" text-anchor="middle" font-size="12">QA Environment - 10.102.3.0/24</text>
            
            <text x="1200" y="415" text-anchor="middle" font-size="11" fill="#92400e">Dev VMs | Test DBs | CI/CD Agents</text>
        </g>
        
        <!-- Services Spoke -->
        <g id="spoke-services">
            <rect x="550" y="600" width="300" height="250" fill="#e0e7ff" stroke="#6366f1" stroke-width="2" rx="15" filter="url(#shadow)"/>
            <text x="700" y="635" text-anchor="middle" font-size="18" font-weight="bold" fill="#312e81">SERVICES SPOKE</text>
            <text x="700" y="660" text-anchor="middle" font-size="14" fill="#4338ca">10.103.0.0/16</text>
            
            <rect x="575" y="690" width="250" height="40" fill="#c7d2fe" stroke="#818cf8" stroke-width="1" rx="5"/>
            <text x="700" y="715" text-anchor="middle" font-size="12">API Gateway - 10.103.1.0/24</text>
            
            <rect x="575" y="745" width="250" height="40" fill="#c7d2fe" stroke="#818cf8" stroke-width="1" rx="5"/>
            <text x="700" y="770" text-anchor="middle" font-size="12">Microservices - 10.103.2.0/24</text>
            
            <text x="700" y="815" text-anchor="middle" font-size="11" fill="#4338ca">Container Instances | Functions | Service Bus</text>
        </g>
        
        <!-- Peering Connections -->
        <g id="peering-connections">
            <!-- Hub to Production -->
            <line x1="450" y1="300" x2="350" y2="300" stroke="#3b82f6" stroke-width="3" stroke-dasharray="10,5"/>
            <text x="400" y="290" text-anchor="middle" font-size="12" fill="#1e40af">VNet Peering</text>
            
            <!-- Hub to Dev/Test -->
            <line x1="950" y1="300" x2="1050" y2="300" stroke="#3b82f6" stroke-width="3" stroke-dasharray="10,5"/>
            <text x="1000" y="290" text-anchor="middle" font-size="12" fill="#1e40af">VNet Peering</text>
            
            <!-- Hub to Services -->
            <line x1="700" y1="500" x2="700" y2="600" stroke="#3b82f6" stroke-width="3" stroke-dasharray="10,5"/>
            <text x="750" y="550" text-anchor="middle" font-size="12" fill="#1e40af">VNet Peering</text>
        </g>
        
        <!-- On-Premises Connection -->
        <g id="on-premises-connection">
            <rect x="50" y="550" width="300" height="150" fill="#f3f4f6" stroke="#6b7280" stroke-width="2" rx="15" filter="url(#shadow)"/>
            <text x="200" y="590" text-anchor="middle" font-size="18" font-weight="bold" fill="#1f2937">ON-PREMISES DC</text>
            <text x="200" y="615" text-anchor="middle" font-size="14" fill="#4b5563">10.0.0.0/16</text>
            
            <line x1="350" y1="625" x2="480" y2="230" stroke="#ef4444" stroke-width="4" stroke-dasharray="15,5"/>
            <text x="415" y="420" text-anchor="middle" font-size="14" fill="#dc2626" font-weight="bold">ExpressRoute</text>
            
            <line x1="350" y1="625" x2="480" y2="250" stroke="#6b7280" stroke-width="2" stroke-dasharray="10,5"/>
            <text x="415" y="440" text-anchor="middle" font-size="12" fill="#4b5563">S2S VPN (Backup)</text>
        </g>
        
        <!-- Internet Connection -->
        <g id="internet-connection">
            <rect x="1050" y="550" width="300" height="150" fill="#fee2e2" stroke="#ef4444" stroke-width="2" rx="15" filter="url(#shadow)"/>
            <text x="1200" y="590" text-anchor="middle" font-size="18" font-weight="bold" fill="#7f1d1d">INTERNET</text>
            
            <line x1="1050" y1="625" x2="920" y2="230" stroke="#ef4444" stroke-width="3"/>
            <text x="985" y="420" text-anchor="middle" font-size="14" fill="#dc2626">Azure Firewall</text>
            <text x="985" y="440" text-anchor="middle" font-size="12" fill="#dc2626">WAF / DDoS Protection</text>
        </g>
    </svg>
</div>

<div class="row mt-5">
    <div class="col-md-4">
        <div class="card h-100 shadow">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="fas fa-hub me-2"></i>Hub VNet Benefits</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="fas fa-check text-success me-2"></i>Centralized connectivity</li>
                    <li><i class="fas fa-check text-success me-2"></i>Shared services</li>
                    <li><i class="fas fa-check text-success me-2"></i>Security perimeter</li>
                    <li><i class="fas fa-check text-success me-2"></i>Cost optimization</li>
                    <li><i class="fas fa-check text-success me-2"></i>Simplified management</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 shadow">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="fas fa-project-diagram me-2"></i>Spoke Isolation</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="fas fa-shield-alt text-primary me-2"></i>Security boundaries</li>
                    <li><i class="fas fa-shield-alt text-primary me-2"></i>Workload separation</li>
                    <li><i class="fas fa-shield-alt text-primary me-2"></i>Independent scaling</li>
                    <li><i class="fas fa-shield-alt text-primary me-2"></i>Blast radius containment</li>
                    <li><i class="fas fa-shield-alt text-primary me-2"></i>Compliance isolation</li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card h-100 shadow">
            <div class="card-header bg-info text-white">
                <h5 class="mb-0"><i class="fas fa-route me-2"></i>Traffic Flow</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li><i class="fas fa-arrow-right text-warning me-2"></i>Spoke-to-spoke via hub</li>
                    <li><i class="fas fa-arrow-right text-warning me-2"></i>Internet via firewall</li>
                    <li><i class="fas fa-arrow-right text-warning me-2"></i>On-prem via gateway</li>
                    <li><i class="fas fa-arrow-right text-warning me-2"></i>Forced tunneling</li>
                    <li><i class="fas fa-arrow-right text-warning me-2"></i>Route tables control</li>
                </ul>
            </div>
        </div>
    </div>
</div>

<div class="text-center mt-5">
    <a asp-action="Connectivity" class="btn btn-primary btn-lg me-3">
        <i class="fas fa-network-wired me-2"></i>View Connectivity Options
    </a>
    <a asp-action="Security" class="btn btn-success btn-lg">
        <i class="fas fa-shield-alt me-2"></i>Security Architecture
    </a>
</div>